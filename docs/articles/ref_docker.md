# Docker

Docker ‚Äî —ç—Ç–æ –ø–æ–ø—É–ª—è—Ä–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º —É–ø–∞–∫–æ–≤—ã–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ –≤—Å–µ –∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–±–∏–±–ª–∏–æ—Ç–µ–∫–∏, —Å–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∫–æ–¥) –≤ **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã**.

```{question} –ó–∞—á–µ–º –≤–æ–æ–±—â–µ –Ω—É–∂–µ–Ω Docker
–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤–∞—à–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ, –Ω–æ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –∫–æ–ª–ª–µ–≥–∏ –∏–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ —É –Ω–∏—Ö –¥—Ä—É–≥–∞—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –Ω—É–∂–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏. Docker —Ä–µ—à–∞–µ—Ç —ç—Ç—É –ø—Ä–æ–±–ª–µ–º—É. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî —ç—Ç–æ –∫–∞–∫ –º–∏–Ω–∏-–∫–æ–º–ø—å—é—Ç–µ—Ä, –≤ –∫–æ—Ç–æ—Ä–æ–º –µ—Å—Ç—å –≤—Å—ë –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –í—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç—å —ç—Ç–æ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–æ —Å–µ—Ç–∏ –∫–æ–º—É —É–≥–æ–¥–Ω–æ, –∏ –æ–Ω –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å *–æ–¥–∏–Ω–∞–∫–æ–≤–æ* –Ω–∞ –ª—é–±–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ, –≥–¥–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Docker.
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–Ω—è—Ç–∏—è Docker

### –û–±—Ä–∞–∑ (Image)

–û–±—Ä–∞–∑ Docker ‚Äî —ç—Ç–æ **—à–∞–±–ª–æ–Ω** –∏–ª–∏ **—Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π, –∫–∞–∫ –¥–æ–ª–∂–µ–Ω –≤—ã–≥–ª—è–¥–µ—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä. –≠—Ç–æ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–π —Ñ–∞–π–ª, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π:
*   –ë–∞–∑–æ–≤—É—é –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, Ubuntu, Alpine Linux).
*   –ö–æ–¥ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
*   –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è –µ–≥–æ —Ä–∞–±–æ—Ç—ã.
*   –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

–û–±—Ä–∞–∑—ã –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å –∫–∞–∫ "—Ä–µ—Ü–µ–ø—Ç" –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –û–±—Ä–∞–∑—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è—Ö, —Ç–∞–∫–∏—Ö –∫–∞–∫ Docker Hub. –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ –æ–±—Ä–∞–∑—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–±—Ä–∞–∑ Python) –∏–ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ.

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä (Container)

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Äî —ç—Ç–æ **–∑–∞–ø—É—â–µ–Ω–Ω–∞—è –∫–æ–ø–∏—è –æ–±—Ä–∞–∑–∞**. –≠—Ç–æ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –≤ –∫–æ—Ç–æ—Ä–æ–π —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
*   **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã** –æ—Ç –æ—Å—Ç–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã.
*   **–õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã**, —Ç–∞–∫ –∫–∞–∫ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –∑–∞–ø—É—Å–∫–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã.
*   **–ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ã**,  —Ç.–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω—ã –Ω–∞ –ª—é–±–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ —Å Docker.

## Dockerfile

–§–∞–π–ª `Dockerfile` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Docker-–æ–±—Ä–∞–∑–∞ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û–Ω –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –Ω–∞ –∫–∞–∫–æ–º –±–∞–∑–æ–≤–æ–º –æ–±—Ä–∞–∑–µ —Å—Ç—Ä–æ–∏—Ç—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–∞–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è, –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –∏ –∫–∞–∫ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–∞–º–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

```{eval-rst}
.. toggle:: –ü–æ–∫–∞–∑–∞—Ç—å

   .. literalinclude:: ../../Dockerfile
      :language: docker
      :caption: Dockerfile
```

**–û–ø–∏—Å–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π:**

1.  `FROM python:3.12-slim`: –ù–∞—á–∏–Ω–∞–µ—Ç —Å–±–æ—Ä–∫—É —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ –æ–±—Ä–∞–∑–∞ Python 3.12, –≤–µ—Ä—Å–∏–∏ `slim`, –∫–æ—Ç–æ—Ä–∞—è –º–µ–Ω—å—à–µ –ø–æ —Ä–∞–∑–º–µ—Ä—É.
2.  `ARG ...`: –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∑–Ω–∞—á–µ–Ω–∏—è –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –≤–æ –≤—Ä–µ–º—è —Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∏–∑ `docker-compose.yaml`).
3.  `RUN apt-get ...`: –û–±–Ω–æ–≤–ª—è–µ—Ç –ø–∞–∫–µ—Ç—ã, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ª–æ–∫–∞–ª–∏ (–≤–∫–ª—é—á–∞—è —Ä—É—Å—Å–∫–∏–µ), –∑–∞—Ç–µ–º –æ—á–∏—â–∞–µ—Ç –∫—ç—à –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–±—Ä–∞–∑–∞.
4.  `ENV LANG ...`: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –ª–æ–∫–∞–ª–∏ –∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ Python.
5.  `WORKDIR /${APP_NAME}`: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ä–∞–±–æ—á—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
6.  `RUN groupadd ... useradd ...`: –°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≥—Ä—É–ø–ø—É –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–µ –æ—Ç root).
7.  `COPY requirements.txt .`: –ö–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ –æ–±—Ä–∞–∑.
8.  `RUN pip install ...`: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Python-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.
9.  `COPY --chown=${DEPLOY_USER_NAME}:${DEPLOY_USER_NAME} . .`: –ö–æ–ø–∏—Ä—É–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
10. `USER ${DEPLOY_USER_NAME}`: –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–∑–¥–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
11. `CMD ["python", "-m", "src.main"]`: –ö–æ–º–∞–Ω–¥–∞, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è `src/main.py`.

## docker-compose.yaml

–§–∞–π–ª `docker-compose.yaml` –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –º–Ω–æ–≥–æ–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º. –û–Ω –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–∞–º–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö) –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω—ã, –∫–∞–∫ –æ–Ω–∏ —Å–≤—è–∑–∞–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π, –∏ –∫–∞–∫–∏–µ —É –Ω–∏—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–ø–æ—Ä—Ç, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, volumes).

```{eval-rst}
.. toggle:: –ü–æ–∫–∞–∑–∞—Ç—å

   .. literalinclude:: ../../docker-compose.yaml
      :language: yaml
      :caption: docker-compose.yaml
```

**–û–ø–∏—Å–∞–Ω–∏–µ:**

*   `container_name: ${DOCKER_CONTAINER_NAME}`: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –∏—Å–ø–æ–ª—å–∑—É—è –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ `.env`.
*   `build: ...`: –£–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –æ–±—Ä–∞–∑ –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –Ω—É–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å –∏–∑ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –∏—Å–ø–æ–ª—å–∑—É—è `Dockerfile`. –ü–µ—Ä–µ–¥–∞—ë—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (`UID`, `GID`, `DEPLOY_USER_NAME`, `APP_NAME`, `APP_PORT`) –≤ –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏.
*   `command: python src/main.py`: –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É `CMD` –∏–∑ `Dockerfile`, —É–∫–∞–∑—ã–≤–∞—è, –∫–∞–∫ –∏–º–µ–Ω–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.
*   `volumes: - .:/${APP_NAME}`: –ú–æ–Ω—Ç–∏—Ä—É–µ—Ç —Ç–µ–∫—É—â—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Ö–æ—Å—Ç-–º–∞—à–∏–Ω–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `/${APP_NAME}` –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∏–¥–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (–ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ).
*   `env_file: - .env`: –ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ —Ñ–∞–π–ª–∞ `.env`.
*   `ports: - "${DOCKER_PORT}:${APP_PORT}"`: –ü—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç —Å —Ö–æ—Å—Ç-–º–∞—à–∏–Ω—ã (`DOCKER_PORT` –∏–∑ `.env`) –Ω–∞ –ø–æ—Ä—Ç –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (`APP_PORT` –∏–∑ `.env`), –ø–æ–∑–≤–æ–ª—è—è –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –∏–∑–≤–Ω–µ.
*   `restart: unless-stopped`: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –û–Ω –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω, –µ—Å–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –µ–≥–æ –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –≤—Ä—É—á–Ω—É—é.
*   `tty: true` –∏ `stdin_open: true`: –ü–æ–∑–≤–æ–ª—è—é—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã.
*   `environment: - PYTHONIOENCODING=utf-8`: –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

## .dockerignore

–§–∞–π–ª `.dockerignore` –∞–Ω–∞–ª–æ–≥–∏—á–µ–Ω `.gitignore`, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Docker'–æ–º –ø—Ä–∏ *—Å–±–æ—Ä–∫–µ –æ–±—Ä–∞–∑–∞*. –û–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–∏–µ —Ñ–∞–π–ª—ã –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ *–Ω–µ –Ω—É–∂–Ω–æ* –≤–∫–ª—é—á–∞—Ç—å –≤ *–∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–±–æ—Ä–∫–∏* ‚Äî –ø–∞–ø–∫—É, –∫–æ—Ç–æ—Ä–∞—è –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è Docker-–¥–µ–º–æ–Ω—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—Ä–∞–∑–∞.

```{question} –ó–∞—á–µ–º —ç—Ç–æ –Ω—É–∂–Ω–æ?
*   **–£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:** –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –Ω–µ–Ω—É–∂–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `.git`, –ª–æ–≥–æ–≤, –∫—ç—à–∞ IDE) —É–º–µ–Ω—å—à–∞–µ—Ç –æ–±—ä—ë–º –¥–∞–Ω–Ω—ã—Ö, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –ø—Ä–∏ —Å–±–æ—Ä–∫–µ, —á—Ç–æ —É—Å–∫–æ—Ä—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å.
*   **–£—Å–∫–æ—Ä–µ–Ω–∏–µ —Å–±–æ—Ä–∫–∏:** –ú–µ–Ω—å—à–µ —Ñ–∞–π–ª–æ–≤ ‚Äî –±—ã—Å—Ç—Ä–µ–µ –∞–Ω–∞–ª–∏–∑ –∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ.
*   **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–ª—É—á–∞–π–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `.env` —Å —Ç–æ–∫–µ–Ω–∞–º–∏) –≤ –æ–±—Ä–∞–∑.
```
```{eval-rst}
.. toggle:: –ü–æ–∫–∞–∑–∞—Ç—å

   .. literalinclude:: ../../.dockerignore
      :language: text
      :caption: .dockerignore
```

**–û–ø–∏—Å–∞–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π:**
*   **`.git`**: –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Git –Ω–µ –Ω—É–∂–µ–Ω –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
*   **`.env`, `*.log`, `*.pyc`, `__pycache__`**: –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –ª–æ–≥–∏ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã Python.
*   **`venv/`, `.pytest_cache/`**: –õ–æ–∫–∞–ª—å–Ω—ã–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –∫—ç—à–∏ —Ç–µ—Å—Ç–æ–≤.
*   **`.vscode/`, `.idea/`**: –§–∞–π–ª—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫ IDE.
*   **`node_modules/`, `dist/`, `build/`**: –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –Ω–µ –æ—Ç–Ω–æ—Å—è—â–∏–µ—Å—è –∫ Python-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –∏–ª–∏ –Ω–µ –Ω—É–∂–Ω—ã–µ –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º –æ–±—Ä–∞–∑–µ.
*   **`docs/`, `README.md`**: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, –≤–æ–∑–º–æ–∂–Ω–æ, –Ω–µ –Ω—É–∂–Ω–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## üß∞ Makefile

–§–∞–π–ª `Makefile` ‚Äî —ç—Ç–æ —Ñ–∞–π–ª —Å –Ω–∞–±–æ—Ä–æ–º –∫–æ–º–∞–Ω–¥ (—Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º—ã—Ö "–∑–∞–¥–∞—á" –∏–ª–∏ "–ø—Ä–∞–≤–∏–ª"), –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –∫–∞–∂–¥—ã–π —Ä–∞–∑ –≤–≤–æ–¥–∏—Ç—å –¥–ª–∏–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Docker Compose, –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã `make`, –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –≤ `Makefile`.

```{eval-rst}
.. toggle:: –ü–æ–∫–∞–∑–∞—Ç—å

   .. literalinclude:: ../../Makefile
      :language: make
      :caption: Makefile
```

**–û–ø–∏—Å–∞–Ω–∏–µ:**

*   `include .env`: –ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞ `.env`, —á—Ç–æ–±—ã –æ–Ω–∏ –±—ã–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ `Makefile`.
*   `up`: –ó–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã, –æ–ø–∏—Å–∞–Ω–Ω—ã–µ –≤ `docker-compose.yaml`, –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ (`-d`).
*   `down`: –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏ —É–¥–∞–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ `docker-compose up`, –Ω–æ *–Ω–µ —É–¥–∞–ª—è–µ—Ç* –æ–±—Ä–∞–∑—ã.
*   `restart`: –ö–æ–º–±–∏–Ω–∞—Ü–∏—è `down` –∏ `up`, –±—ã—Å—Ç—Ä–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –±–µ–∑ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–∞. –ü–æ–ª–µ–∑–Ω–æ, –µ—Å–ª–∏ –≤—ã –∏–∑–º–µ–Ω–∏–ª–∏ –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
*   `build`: –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –æ–±—Ä–∞–∑—ã, –∏—Å–ø–æ–ª—å–∑—É—è `docker-compose build`, —Å —Ñ–ª–∞–≥–æ–º `--no-cache`, –∏–≥–Ω–æ—Ä–∏—Ä—É—è –∫—ç—à. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å `Dockerfile` –∏–ª–∏ `requirements.txt`.
*   `rebuild`: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è: `prune` (–æ—á–∏—Å—Ç–∫–∞), `build` (–ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞), `up` (–∑–∞–ø—É—Å–∫).
*   `logs`: –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å –∏–º–µ–Ω–µ–º, —É–∫–∞–∑–∞–Ω–Ω—ã–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `DOCKER_CONTAINER_NAME`, –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (`-f`).
*   `bash`: –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é —Å–µ—Å—Å–∏—é bash (–∏–ª–∏ sh) –≤–Ω—É—Ç—Ä–∏ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `app`). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç "–≤–æ–π—Ç–∏" –≤ —Ä–∞–±–æ—Ç–∞—é—â–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤—Ä—É—á–Ω—É—é.
*   `prune`: –£–¥–∞–ª—è–µ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã, *–ª–æ–∫–∞–ª—å–Ω—ã–µ* (–ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ª–æ–∫–∞–ª—å–Ω–æ) –æ–±—Ä–∞–∑—ã, –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Ç–∏ –∏ —Ç–æ–º–∞, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –ø—Ä–æ–µ–∫—Ç–æ–º.
*   `docs-clean`: –í—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—É `make clean` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `docs`, –æ—á–∏—â–∞—è –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–±–æ—Ä–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Sphinx.
*   `docs-html`: –í—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—É `make html` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `docs`, –≥–µ–Ω–µ—Ä–∏—Ä—É—è HTML-–≤–µ—Ä—Å–∏—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.
*   `help`: –í—ã–≤–æ–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –∏ –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–π.

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

*   [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Docker](https://docs.docker.com/)
*   [Docker Compose documentation](https://docs.docker.com/compose/)
*   [–ü—Ä–∏–º–µ—Ä—ã –∏ —Ç—É—Ç–æ—Ä–∏–∞–ª—ã –Ω–∞ Habr](https://habr.com/ru/companies/ruvds/articles/438796/)